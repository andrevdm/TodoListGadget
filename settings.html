<html >
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=Unicode" />
        <title>Details</title>
        <style type="text/css">
			body
			{
				margin: 0;
				width: 650px;
				height: 300px;
				font-family: verdana;
				overflow-y:scroll;
				overflow-x:hidden;
				background-color: yellow;
			}
        </style>
		<script type="text/javascript" src="jquery-1.4.1.js"></script>
        <script type="text/jscript" language="jscript">
				function alert( s )
				{
					System.Debug.outputString( s ); 
				}
				
				function init()
				{
					System.Gadget.onSettingsClosed = OnSettingsClosed;
					var todoFiles = System.Gadget.Settings.read("todoFiles")
					
					document.getElementById("todoFiles").value = todoFiles;
				}
				
				function OnSettingsClosed( event )
				{
					if( event.closeAction == event.Action.commit )
					{
						var main = document.getElementById( "todoFiles" )
						var files = Trim( main.value )
						System.Gadget.Settings.write( "todoFiles", files )
						
						var items = files.split( "\r\n" )
						
						System.Gadget.document.parentWindow.m_todoFiles = []
						
						for( var i = 0; i < items.length; ++i )
						{
							if( items[i] != "" )
							{
								System.Gadget.document.parentWindow.m_todoFiles[ System.Gadget.document.parentWindow.m_todoFiles.length ] = items[ i ];
							}
						}
						
						 event.cancel = false;
						 System.Gadget.document.parentWindow.ReLoadPage()
					}
				}	

				function Trim( s )
				{
					return s.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
				}
        </script>
    </head>
    <body onload="init()">
		<div id="mainContent">
			<textarea id="todoFiles" cols="35" rows="5"></textarea><br/>
		</div>
    </body>
</html>